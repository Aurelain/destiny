import getSwHome from './getSwHome.js';

// =====================================================================================================================
//  D E C L A R A T I O N S
// =====================================================================================================================
const INDICATOR_FILE_PATH = getSwHome() + '/meta/dot.png';

// =====================================================================================================================
//  P U B L I C
// =====================================================================================================================
/**
 * https://www.freecodecamp.org/news/how-to-check-internet-connection-status-with-javascript/
 */
const checkOffline = async () => {
    try {
        const online = await fetch(INDICATOR_FILE_PATH + '?' + Date.now());
        return online.status < 200 || online.status >= 300;
    } catch (err) {
        return true; // definitely offline
    }
};

// =====================================================================================================================
//  E X P O R T
// =====================================================================================================================
export default checkOffline;
