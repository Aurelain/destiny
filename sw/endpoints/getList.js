import requestJson from '../utils/requestJson.js';
import readTokens from '../system/readTokens.js';

// =====================================================================================================================
//  D E C L A R A T I O N S
// =====================================================================================================================

// =====================================================================================================================
//  P U B L I C
// =====================================================================================================================

/**
 *
 */
async function getList() {
    const tokens = await readTokens();
    const result = await requestJson('https://content.googleapis.com/calendar/v3/calendars/primary/events', {
        searchParams: {
            calendarId: 'primary',
            timeMin: new Date().toISOString(),
            showDeleted: false,
            singleEvents: true,
            maxResults: 9,
            orderBy: 'startTime',
        },
        headers: {
            Authorization: `Bearer ${tokens.access_token}`,
        },
    });
    console.log('result:', result);
    return result.items;
}

// =====================================================================================================================
//  P R I V A T E
// =====================================================================================================================

// =====================================================================================================================
//  E X P O R T
// =====================================================================================================================
export default getList;
